{"remainingRequest":"G:\\notebook_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\notebook_web\\src\\views\\DeleteAccount.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\notebook_web\\src\\views\\DeleteAccount.vue","mtime":1650177032184},{"path":"G:\\notebook_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\notebook_web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\notebook_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\notebook_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRGVsZXRlQWNjb3VudCcsCiAgZGF0YTogKCkgPT4gKHsKICAgIHVzZXI6IHsKICAgICAgZW1haWw6ICcnLAogICAgICBwYXNzd29yZDogJycsCiAgICAgIGNvbmZpcm1lZFBhc3N3b3JkOiAnJywKICAgICAgdmVyaWZpY2F0aW9uQ29kZTogJycsCiAgICB9LAogICAgdmFsaWQ6IHRydWUsCiAgICBlbWFpbDogJycsCiAgICBlbWFpbFJ1bGVzOiBbCiAgICAgIHYgPT4gISF2IHx8ICfpgq7nrrHkuI3og73kuLrnqbrvvIEnLAogICAgICB2ID0+IC8uK0AuK1wuLisvLnRlc3QodikgfHwgJ+mCrueuseagvOW8j+mdnuazle+8gScsCiAgICBdLAogICAgcGFzc3dvcmQ6ICcnLAogICAgcGFzc3dvcmRSdWxlczogWwogICAgICB2ID0+ICEhdiB8fCAn5a+G56CB5LiN6IO95Li656m677yBJywKICAgIF0sCiAgfSksCiAgbWV0aG9kczogewogICAgdmFsaWRhdGUgKCkgewogICAgICB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKQogICAgICBpZiAodGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzCiAgICAgICAgdGhpcy4kaHR0cC5wb3N0KCcvbW9kaWZ5L2RlbGV0ZUFjY291bnQuZG8nLCB7CiAgICAgICAgICBlbWFpbDogX3RoaXMudXNlci5lbWFpbCwKICAgICAgICAgIHBhc3N3b3JkOiBfdGhpcy51c2VyLmNvbmZpcm1lZFBhc3N3b3JkLAogICAgICAgICAgdmVyaWZpY2F0aW9uQ29kZTogX3RoaXMudXNlci52ZXJpZmljYXRpb25Db2RlLAogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5mbGFnKSB7CiAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5kYXRhLmVycm9yTXNnLAogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgfSkKICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnZW1haWwnKQogICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnL2NvbXBvbmVudHMvbG9naW4nIH0pLmNhdGNoKGVyciA9PiB7IGVyciA9IG51bGwgfSkKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5kYXRhLmVycm9yTXNnLAogICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgY29uc29sZS5sb2coZSkKICAgICAgICB9KQogICAgICB9CiAgICB9LAogICAgcmVzZXQgKCkgewogICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXQoKQogICAgfSwKICAgIGNvbmZpcm1lZFBhc3N3b3JkUnVsZXM6IGZ1bmN0aW9uICh2KSB7CiAgICAgIGlmICh2Lmxlbmd0aCA9PT0gMCAmJiB0aGlzLnVzZXIucGFzc3dvcmQubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgcmV0dXJuICflr4bnoIHkuI3og73kuLrnqbrvvIEnCiAgICAgIH0gZWxzZSBpZiAodiAhPT0gdGhpcy51c2VyLnBhc3N3b3JkKSB7CiAgICAgICAgcmV0dXJuICfkuKTmrKHnmoTlr4bnoIHkuI3kuIDoh7TvvIEnCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICcnCiAgICAgIH0KICAgIH0sCiAgICB2ZXJpZmljYXRpb25SdWxlczogZnVuY3Rpb24gKHYpIHsKICAgICAgaWYgKHYubGVuZ3RoID09PSAwICYmIHRoaXMudXNlci5jb25maXJtZWRQYXNzd29yZC5sZW5ndGggIT09IDApIHsKICAgICAgICByZXR1cm4gJ+mqjOivgeeggeS4jeiDveS4uuepuu+8gScKICAgICAgfQogICAgfSwKICAgIGZ1bjE6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnLycgfSkuY2F0Y2goZXJyID0+IHsgZXJyID0gbnVsbCB9KQogICAgfSwKICAgIGZ1bl92ZXJpZmljYXRpb246IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpcwogICAgICB0aGlzLiRodHRwLnBvc3QoJy9yZWdpc3Rlci9jaGVja0VtYWlsRXhpc3QuZG8nLCB7CiAgICAgICAgZW1haWw6IF90aGlzLnVzZXIuZW1haWwsCiAgICAgICAgZGVsZXRlQWNjb3VudDogdHJ1ZSwKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5mbGFnKSB7CiAgICAgICAgICBfdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGEuZXJyb3JNc2csCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgIH0pCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UuZGF0YS5lcnJvck1zZywKICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coZSkKICAgICAgfSkKICAgIH0sCiAgfSwKICBjb21wdXRlZDogewogICAgLy8gY29uZmlybWVkUGFzc3dvcmRFcnJvcnMgKCkgewogICAgLy8gICBjb25zdCBlcnJvcnMgPSBbXQogICAgLy8gICBpZiAoIXRoaXMuJHYuY29uZmlybWVkUGFzc3dvcmQuJGRpcnR5KSByZXR1cm4gZXJyb3JzCiAgICAvLyAgICF0aGlzLiR2LmNvbmZpcm1lZFBhc3N3b3JkLnJlcXVpcmVkICYmIGVycm9ycy5wdXNoKCdOYW1lIGlzIHJlcXVpcmVkLicpCiAgICAvLyAgIHJldHVybiBlcnJvcnMKICAgIC8vIH0sCiAgfSwKfQo="},{"version":3,"sources":["DeleteAccount.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DeleteAccount.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div id=\"appR\">\r\n    <el-row\r\n      type=\"flex\"\r\n      justify=\"center\"\r\n    >\r\n      <!-- justify 对齐方式 -->\r\n      <el-col\r\n        :span=\"12\"\r\n        style=\"height:100px\"\r\n      >\r\n      </el-col>\r\n    </el-row>\r\n    <el-row\r\n      type=\"flex\"\r\n      justify=\"center\"\r\n    >\r\n      <!-- justify 对齐方式 -->\r\n      <el-col :span=\"12\">\r\n        <el-container>\r\n          <el-main style=\"display:flex;justify-content:center;\">\r\n            <el-card\r\n              class=\"el-card\"\r\n              shadow=\"always\"\r\n            >\r\n              <h1 style=\"text-align: center;\">注销账号</h1>\r\n              <el-divider></el-divider>\r\n              <v-form\r\n                ref=\"form\"\r\n                v-model=\"valid\"\r\n                lazy-validation\r\n              >\r\n                <v-text-field\r\n                  v-model=\"user.email\"\r\n                  :rules=\"emailRules\"\r\n                  label=\"邮箱\"\r\n                  required\r\n                ></v-text-field>\r\n\r\n                <v-text-field\r\n                  v-model=\"user.password\"\r\n                  :rules=\"passwordRules\"\r\n                  type=\"password\"\r\n                  label=\"密码\"\r\n                  required\r\n                ></v-text-field>\r\n                <v-text-field\r\n                  v-model=\"user.confirmedPassword\"\r\n                  type=\"password\"\r\n                  :error-messages=\"confirmedPasswordRules(user.confirmedPassword)\"\r\n                  label=\"确认密码\"\r\n                  required\r\n                ></v-text-field>\r\n                <v-row>\r\n                  <v-col>\r\n                    <v-text-field\r\n                      v-model=\"user.verificationCode\"\r\n                      type=\"text\"\r\n                      :error-messages=\"verificationRules(user.verificationCode)\"\r\n                      label=\"验证码\"\r\n                      required\r\n                    ></v-text-field>\r\n                  </v-col>\r\n                  <v-col>\r\n                    <v-btn\r\n                      class=\"ma-2\"\r\n                      outlined\r\n                      color=\"indigo\"\r\n                      @click=\"fun_verification\"\r\n                    >\r\n                      发送邮箱验证码\r\n                    </v-btn>\r\n                  </v-col>\r\n                </v-row>\r\n                <div style=\"height: 20px\"></div>\r\n                <el-button\r\n                  type=\"primary\"\r\n                  :disabled=\"!valid\"\r\n                  @click=\"validate\"\r\n                >注销</el-button>\r\n\r\n                <el-button\r\n                  type=\"info\"\r\n                  @click=\"reset\"\r\n                >重置</el-button>\r\n                <el-button\r\n                  type=\"info\"\r\n                  @click=\"fun1\"\r\n                >退出</el-button>\r\n\r\n              </v-form>\r\n            </el-card>\r\n          </el-main>\r\n        </el-container>\r\n      </el-col>\r\n    </el-row>\r\n    <el-row\r\n      type=\"flex\"\r\n      justify=\"center\"\r\n    >\r\n      <!-- justify 对齐方式 -->\r\n      <el-col\r\n        :span=\"6\"\r\n        style=\"height:100px\"\r\n      >\r\n      </el-col>\r\n    </el-row>\r\n    <el-row\r\n      type=\"flex\"\r\n      justify=\"center\"\r\n    >\r\n      <!-- justify 对齐方式 -->\r\n      <el-col\r\n        :span=\"6\"\r\n        style=\"height:100px\"\r\n      >\r\n      </el-col>\r\n    </el-row>\r\n    <el-row\r\n      type=\"flex\"\r\n      justify=\"center\"\r\n    >\r\n      <!-- justify 对齐方式 -->\r\n      <el-col\r\n        :span=\"6\"\r\n        style=\"height:100px\"\r\n      >\r\n      </el-col>\r\n    </el-row>\r\n    <el-row\r\n      type=\"flex\"\r\n      justify=\"center\"\r\n    >\r\n      <!-- justify 对齐方式 -->\r\n      <el-col\r\n        :span=\"6\"\r\n        style=\"height:100px\"\r\n      >\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: 'DeleteAccount',\r\n    data: () => ({\r\n      user: {\r\n        email: '',\r\n        password: '',\r\n        confirmedPassword: '',\r\n        verificationCode: '',\r\n      },\r\n      valid: true,\r\n      email: '',\r\n      emailRules: [\r\n        v => !!v || '邮箱不能为空！',\r\n        v => /.+@.+\\..+/.test(v) || '邮箱格式非法！',\r\n      ],\r\n      password: '',\r\n      passwordRules: [\r\n        v => !!v || '密码不能为空！',\r\n      ],\r\n    }),\r\n    methods: {\r\n      validate () {\r\n        this.$refs.form.validate()\r\n        if (this.$refs.form.validate()) {\r\n          var _this = this\r\n          this.$http.post('/modify/deleteAccount.do', {\r\n            email: _this.user.email,\r\n            password: _this.user.confirmedPassword,\r\n            verificationCode: _this.user.verificationCode,\r\n          }).then(function (response) {\r\n            if (response.data.flag) {\r\n              _this.$message({\r\n                message: response.data.errorMsg,\r\n                type: 'success',\r\n              })\r\n              sessionStorage.removeItem('email')\r\n              _this.$router.push({ path: '/components/login' }).catch(err => { err = null })\r\n            } else {\r\n              _this.$message({\r\n                message: response.data.errorMsg,\r\n                type: 'warning',\r\n              })\r\n            }\r\n          }).catch(function (e) {\r\n            console.log(e)\r\n          })\r\n        }\r\n      },\r\n      reset () {\r\n        this.$refs.form.reset()\r\n      },\r\n      confirmedPasswordRules: function (v) {\r\n        if (v.length === 0 && this.user.password.length !== 0) {\r\n          return '密码不能为空！'\r\n        } else if (v !== this.user.password) {\r\n          return '两次的密码不一致！'\r\n        } else {\r\n          return ''\r\n        }\r\n      },\r\n      verificationRules: function (v) {\r\n        if (v.length === 0 && this.user.confirmedPassword.length !== 0) {\r\n          return '验证码不能为空！'\r\n        }\r\n      },\r\n      fun1: function () {\r\n        this.$router.push({ path: '/' }).catch(err => { err = null })\r\n      },\r\n      fun_verification: function () {\r\n        var _this = this\r\n        this.$http.post('/register/checkEmailExist.do', {\r\n          email: _this.user.email,\r\n          deleteAccount: true,\r\n        }).then(function (response) {\r\n          if (response.data.flag) {\r\n            _this.$message({\r\n              message: response.data.errorMsg,\r\n              type: 'success',\r\n            })\r\n          } else {\r\n            _this.$message({\r\n              message: response.data.errorMsg,\r\n              type: 'warning',\r\n            })\r\n          }\r\n        }).catch(function (e) {\r\n          console.log(e)\r\n        })\r\n      },\r\n    },\r\n    computed: {\r\n      // confirmedPasswordErrors () {\r\n      //   const errors = []\r\n      //   if (!this.$v.confirmedPassword.$dirty) return errors\r\n      //   !this.$v.confirmedPassword.required && errors.push('Name is required.')\r\n      //   return errors\r\n      // },\r\n    },\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  #submit{\r\n    color: #FFFFFF;\r\n    background: rgb(24,103,192);\r\n  }\r\n  #reset{\r\n    color: #FFFFFF;\r\n    background: rgb(251,140,0);\r\n  }\r\n  #appR{\r\n    background: url(../assets/bg.jpg) no-repeat;\r\n    background-size: cover;\r\n    height: 100%;\r\n  }\r\n  .el-card{\r\n    border-radius:30px;\r\n    width: 580px;\r\n    display:flex;\r\n    justify-content:center;\r\n  }\r\n  .el-row {\r\n    margin-bottom: 20px;\r\n  }\r\n  .v-form {\r\n    width: 380px;\r\n  }\r\n</style>\r\n"]}]}