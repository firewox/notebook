{"remainingRequest":"G:\\notebook_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\notebook_web\\src\\views\\DeleteAccount.vue?vue&type=style&index=0&id=a7312590&lang=scss&scoped=true&","dependencies":[{"path":"G:\\notebook_web\\src\\views\\DeleteAccount.vue","mtime":1650187956731},{"path":"G:\\notebook_web\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\notebook_web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"G:\\notebook_web\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"G:\\notebook_web\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\notebook_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\notebook_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiNzdWJtaXR7CiAgY29sb3I6ICNGRkZGRkY7CiAgYmFja2dyb3VuZDogcmdiKDI0LDEwMywxOTIpOwp9CiNyZXNldHsKICBjb2xvcjogI0ZGRkZGRjsKICBiYWNrZ3JvdW5kOiByZ2IoMjUxLDE0MCwwKTsKfQojYXBwUnsKICBiYWNrZ3JvdW5kOiB1cmwoLi4vYXNzZXRzL2xvZ2luLmpwZykgbm8tcmVwZWF0OwogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7CiAgaGVpZ2h0OiAxMDAlOwp9Ci5lbC1jYXJkewogIGJvcmRlci1yYWRpdXM6MzBweDsKICB3aWR0aDogNTgwcHg7CiAgZGlzcGxheTpmbGV4OwogIGp1c3RpZnktY29udGVudDpjZW50ZXI7Cn0KLmVsLXJvdyB7CiAgbWFyZ2luLWJvdHRvbTogMjBweDsKfQoudi1mb3JtIHsKICB3aWR0aDogMzgwcHg7Cn0K"},{"version":3,"sources":["DeleteAccount.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DeleteAccount.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div id=\"appR\">\r\n    <el-row\r\n      type=\"flex\"\r\n      justify=\"center\"\r\n    >\r\n      <!-- justify 对齐方式 -->\r\n      <el-col\r\n        :span=\"12\"\r\n        style=\"height:100px\"\r\n      >\r\n      </el-col>\r\n    </el-row>\r\n    <el-row\r\n      type=\"flex\"\r\n      justify=\"center\"\r\n    >\r\n      <!-- justify 对齐方式 -->\r\n      <el-col :span=\"12\">\r\n        <el-container>\r\n          <el-main style=\"display:flex;justify-content:center;\">\r\n            <el-card\r\n              class=\"el-card\"\r\n              shadow=\"always\"\r\n            >\r\n              <h1 style=\"text-align: center;\">注销账号</h1>\r\n              <el-divider></el-divider>\r\n              <v-form\r\n                ref=\"form\"\r\n                v-model=\"valid\"\r\n                lazy-validation\r\n              >\r\n                <v-text-field\r\n                  v-model=\"user.email\"\r\n                  :rules=\"emailRules\"\r\n                  label=\"邮箱\"\r\n                  required\r\n                ></v-text-field>\r\n\r\n                <v-text-field\r\n                  v-model=\"user.password\"\r\n                  :rules=\"passwordRules\"\r\n                  type=\"password\"\r\n                  label=\"密码\"\r\n                  required\r\n                ></v-text-field>\r\n                <v-text-field\r\n                  v-model=\"user.confirmedPassword\"\r\n                  type=\"password\"\r\n                  :error-messages=\"confirmedPasswordRules(user.confirmedPassword)\"\r\n                  label=\"确认密码\"\r\n                  required\r\n                ></v-text-field>\r\n                <v-row>\r\n                  <v-col>\r\n                    <v-text-field\r\n                      v-model=\"user.verificationCode\"\r\n                      type=\"text\"\r\n                      :error-messages=\"verificationRules(user.verificationCode)\"\r\n                      label=\"验证码\"\r\n                      required\r\n                    ></v-text-field>\r\n                  </v-col>\r\n                  <v-col>\r\n                    <v-btn\r\n                      class=\"ma-2\"\r\n                      outlined\r\n                      color=\"indigo\"\r\n                      @click=\"fun_verification\"\r\n                    >\r\n                      发送邮箱验证码\r\n                    </v-btn>\r\n                  </v-col>\r\n                </v-row>\r\n                <div style=\"height: 20px\"></div>\r\n                <el-button\r\n                  type=\"primary\"\r\n                  :disabled=\"!valid\"\r\n                  @click=\"validate\"\r\n                >注销</el-button>\r\n\r\n                <el-button\r\n                  type=\"info\"\r\n                  @click=\"reset\"\r\n                >重置</el-button>\r\n                <el-button\r\n                  type=\"info\"\r\n                  @click=\"fun1\"\r\n                >退出</el-button>\r\n\r\n              </v-form>\r\n            </el-card>\r\n          </el-main>\r\n        </el-container>\r\n      </el-col>\r\n    </el-row>\r\n    <el-row\r\n      type=\"flex\"\r\n      justify=\"center\"\r\n    >\r\n      <!-- justify 对齐方式 -->\r\n      <el-col\r\n        :span=\"6\"\r\n        style=\"height:100px\"\r\n      >\r\n      </el-col>\r\n    </el-row>\r\n    <el-row\r\n      type=\"flex\"\r\n      justify=\"center\"\r\n    >\r\n      <!-- justify 对齐方式 -->\r\n      <el-col\r\n        :span=\"6\"\r\n        style=\"height:100px\"\r\n      >\r\n      </el-col>\r\n    </el-row>\r\n    <el-row\r\n      type=\"flex\"\r\n      justify=\"center\"\r\n    >\r\n      <!-- justify 对齐方式 -->\r\n      <el-col\r\n        :span=\"6\"\r\n        style=\"height:100px\"\r\n      >\r\n      </el-col>\r\n    </el-row>\r\n    <el-row\r\n      type=\"flex\"\r\n      justify=\"center\"\r\n    >\r\n      <!-- justify 对齐方式 -->\r\n      <el-col\r\n        :span=\"6\"\r\n        style=\"height:100px\"\r\n      >\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: 'DeleteAccount',\r\n    data: () => ({\r\n      user: {\r\n        email: '',\r\n        password: '',\r\n        confirmedPassword: '',\r\n        verificationCode: '',\r\n      },\r\n      valid: true,\r\n      email: '',\r\n      emailRules: [\r\n        v => !!v || '邮箱不能为空！',\r\n        v => /.+@.+\\..+/.test(v) || '邮箱格式非法！',\r\n      ],\r\n      password: '',\r\n      passwordRules: [\r\n        v => !!v || '密码不能为空！',\r\n      ],\r\n    }),\r\n    methods: {\r\n      validate () {\r\n        this.$refs.form.validate()\r\n        if (this.$refs.form.validate()) {\r\n          var _this = this\r\n          this.$http.post('/modify/deleteAccount.do', {\r\n            email: _this.user.email,\r\n            password: _this.user.confirmedPassword,\r\n            verificationCode: _this.user.verificationCode,\r\n          }).then(function (response) {\r\n            if (response.data.flag) {\r\n              _this.$message({\r\n                message: response.data.errorMsg,\r\n                type: 'success',\r\n              })\r\n              sessionStorage.removeItem('email')\r\n              _this.$router.push({ path: '/components/login' }).catch(err => { err = null })\r\n            } else {\r\n              _this.$message({\r\n                message: response.data.errorMsg,\r\n                type: 'warning',\r\n              })\r\n            }\r\n          }).catch(function (e) {\r\n            console.log(e)\r\n          })\r\n        }\r\n      },\r\n      reset () {\r\n        this.$refs.form.reset()\r\n      },\r\n      confirmedPasswordRules: function (v) {\r\n        if (v.length === 0 && this.user.password.length !== 0) {\r\n          return '密码不能为空！'\r\n        } else if (v !== this.user.password) {\r\n          return '两次的密码不一致！'\r\n        } else {\r\n          return ''\r\n        }\r\n      },\r\n      verificationRules: function (v) {\r\n        if (v.length === 0 && this.user.confirmedPassword.length !== 0) {\r\n          return '验证码不能为空！'\r\n        }\r\n      },\r\n      fun1: function () {\r\n        this.$router.push({ path: '/' }).catch(err => { err = null })\r\n      },\r\n      fun_verification: function () {\r\n        var _this = this\r\n        this.$http.post('/register/checkEmailExist.do', {\r\n          email: _this.user.email,\r\n          deleteAccount: true,\r\n        }).then(function (response) {\r\n          if (response.data.flag) {\r\n            _this.$message({\r\n              message: response.data.errorMsg,\r\n              type: 'success',\r\n            })\r\n          } else {\r\n            _this.$message({\r\n              message: response.data.errorMsg,\r\n              type: 'warning',\r\n            })\r\n          }\r\n        }).catch(function (e) {\r\n          console.log(e)\r\n        })\r\n      },\r\n    },\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  #submit{\r\n    color: #FFFFFF;\r\n    background: rgb(24,103,192);\r\n  }\r\n  #reset{\r\n    color: #FFFFFF;\r\n    background: rgb(251,140,0);\r\n  }\r\n  #appR{\r\n    background: url(../assets/login.jpg) no-repeat;\r\n    background-size: cover;\r\n    height: 100%;\r\n  }\r\n  .el-card{\r\n    border-radius:30px;\r\n    width: 580px;\r\n    display:flex;\r\n    justify-content:center;\r\n  }\r\n  .el-row {\r\n    margin-bottom: 20px;\r\n  }\r\n  .v-form {\r\n    width: 380px;\r\n  }\r\n</style>\r\n"]}]}