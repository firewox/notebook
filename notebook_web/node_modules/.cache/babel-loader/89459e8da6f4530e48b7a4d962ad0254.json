{"remainingRequest":"G:\\notebook_web\\node_modules\\babel-loader\\lib\\index.js!G:\\notebook_web\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!G:\\notebook_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\notebook_web\\src\\views\\DeleteAccount.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\notebook_web\\src\\views\\DeleteAccount.vue","mtime":1650177032184},{"path":"G:\\notebook_web\\babel.config.js","mtime":1616727095000},{"path":"G:\\notebook_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\notebook_web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\notebook_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\notebook_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudGVzdC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRGVsZXRlQWNjb3VudCcsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXI6IHsKICAgICAgICBlbWFpbDogJycsCiAgICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICAgIGNvbmZpcm1lZFBhc3N3b3JkOiAnJywKICAgICAgICB2ZXJpZmljYXRpb25Db2RlOiAnJwogICAgICB9LAogICAgICB2YWxpZDogdHJ1ZSwKICAgICAgZW1haWw6ICcnLAogICAgICBlbWFpbFJ1bGVzOiBbZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gISF2IHx8ICfpgq7nrrHkuI3og73kuLrnqbrvvIEnOwogICAgICB9LCBmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiAvLitALitcLi4rLy50ZXN0KHYpIHx8ICfpgq7nrrHmoLzlvI/pnZ7ms5XvvIEnOwogICAgICB9XSwKICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICBwYXNzd29yZFJ1bGVzOiBbZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gISF2IHx8ICflr4bnoIHkuI3og73kuLrnqbrvvIEnOwogICAgICB9XQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHZhbGlkYXRlOiBmdW5jdGlvbiB2YWxpZGF0ZSgpIHsKICAgICAgdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCk7CgogICAgICBpZiAodGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICB0aGlzLiRodHRwLnBvc3QoJy9tb2RpZnkvZGVsZXRlQWNjb3VudC5kbycsIHsKICAgICAgICAgIGVtYWlsOiBfdGhpcy51c2VyLmVtYWlsLAogICAgICAgICAgcGFzc3dvcmQ6IF90aGlzLnVzZXIuY29uZmlybWVkUGFzc3dvcmQsCiAgICAgICAgICB2ZXJpZmljYXRpb25Db2RlOiBfdGhpcy51c2VyLnZlcmlmaWNhdGlvbkNvZGUKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuZmxhZykgewogICAgICAgICAgICBfdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UuZGF0YS5lcnJvck1zZywKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCdlbWFpbCcpOwoKICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICBwYXRoOiAnL2NvbXBvbmVudHMvbG9naW4nCiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICBlcnIgPSBudWxsOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5kYXRhLmVycm9yTXNnLAogICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldCgpOwogICAgfSwKICAgIGNvbmZpcm1lZFBhc3N3b3JkUnVsZXM6IGZ1bmN0aW9uIGNvbmZpcm1lZFBhc3N3b3JkUnVsZXModikgewogICAgICBpZiAodi5sZW5ndGggPT09IDAgJiYgdGhpcy51c2VyLnBhc3N3b3JkLmxlbmd0aCAhPT0gMCkgewogICAgICAgIHJldHVybiAn5a+G56CB5LiN6IO95Li656m677yBJzsKICAgICAgfSBlbHNlIGlmICh2ICE9PSB0aGlzLnVzZXIucGFzc3dvcmQpIHsKICAgICAgICByZXR1cm4gJ+S4pOasoeeahOWvhueggeS4jeS4gOiHtO+8gSc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CiAgICB9LAogICAgdmVyaWZpY2F0aW9uUnVsZXM6IGZ1bmN0aW9uIHZlcmlmaWNhdGlvblJ1bGVzKHYpIHsKICAgICAgaWYgKHYubGVuZ3RoID09PSAwICYmIHRoaXMudXNlci5jb25maXJtZWRQYXNzd29yZC5sZW5ndGggIT09IDApIHsKICAgICAgICByZXR1cm4gJ+mqjOivgeeggeS4jeiDveS4uuepuu+8gSc7CiAgICAgIH0KICAgIH0sCiAgICBmdW4xOiBmdW5jdGlvbiBmdW4xKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy8nCiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBlcnIgPSBudWxsOwogICAgICB9KTsKICAgIH0sCiAgICBmdW5fdmVyaWZpY2F0aW9uOiBmdW5jdGlvbiBmdW5fdmVyaWZpY2F0aW9uKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy4kaHR0cC5wb3N0KCcvcmVnaXN0ZXIvY2hlY2tFbWFpbEV4aXN0LmRvJywgewogICAgICAgIGVtYWlsOiBfdGhpcy51c2VyLmVtYWlsLAogICAgICAgIGRlbGV0ZUFjY291bnQ6IHRydWUKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5mbGFnKSB7CiAgICAgICAgICBfdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGEuZXJyb3JNc2csCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UuZGF0YS5lcnJvck1zZywKICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsvLyBjb25maXJtZWRQYXNzd29yZEVycm9ycyAoKSB7CiAgICAvLyAgIGNvbnN0IGVycm9ycyA9IFtdCiAgICAvLyAgIGlmICghdGhpcy4kdi5jb25maXJtZWRQYXNzd29yZC4kZGlydHkpIHJldHVybiBlcnJvcnMKICAgIC8vICAgIXRoaXMuJHYuY29uZmlybWVkUGFzc3dvcmQucmVxdWlyZWQgJiYgZXJyb3JzLnB1c2goJ05hbWUgaXMgcmVxdWlyZWQuJykKICAgIC8vICAgcmV0dXJuIGVycm9ycwogICAgLy8gfSwKICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgJA;AACAA,uBADA;AAEAC;AAAA;AACAC;AACAC,iBADA;AAEAC,oBAFA;AAGAC,6BAHA;AAIAC;AAJA,OADA;AAOAC,iBAPA;AAQAJ,eARA;AASAK,mBACA;AAAA;AAAA,OADA,EAEA;AAAA;AAAA,OAFA,CATA;AAaAJ,kBAbA;AAcAK,sBACA;AAAA;AAAA,OADA;AAdA;AAAA,GAFA;AAoBAC;AACAC,YADA,sBACA;AACA;;AACA;AACA;;AACA;AACAR,iCADA;AAEAC,gDAFA;AAGAE;AAHA,WAIAM,IAJA,CAIA;AACA;AACAC;AACAC,6CADA;AAEAC;AAFA;;AAIAC;;AACAH;AAAAI;AAAA;AAAAC;AAAA;AACA,WAPA,MAOA;AACAL;AACAC,6CADA;AAEAC;AAFA;AAIA;AACA,SAlBA,EAkBAI,KAlBA,CAkBA;AACAC;AACA,SApBA;AAqBA;AACA,KA3BA;AA4BAC,SA5BA,mBA4BA;AACA;AACA,KA9BA;AA+BAC;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAvCA;AAwCAC;AACA;AACA;AACA;AACA,KA5CA;AA6CAC;AACA;AAAAP;AAAA;AAAAC;AAAA;AACA,KA/CA;AAgDAO;AACA;;AACA;AACAtB,+BADA;AAEAuB;AAFA,SAGAd,IAHA,CAGA;AACA;AACAC;AACAC,2CADA;AAEAC;AAFA;AAIA,SALA,MAKA;AACAF;AACAC,2CADA;AAEAC;AAFA;AAIA;AACA,OAfA,EAeAI,KAfA,CAeA;AACAC;AACA,OAjBA;AAkBA;AApEA,GApBA;AA0FAO,aACA;AACA;AACA;AACA;AACA;AACA;AANA;AA1FA","names":["name","data","user","email","password","confirmedPassword","verificationCode","valid","emailRules","passwordRules","methods","validate","then","_this","message","type","sessionStorage","path","err","catch","console","reset","confirmedPasswordRules","verificationRules","fun1","fun_verification","deleteAccount","computed"],"sourceRoot":"src/views","sources":["DeleteAccount.vue"],"sourcesContent":["<template>\r\n  <div id=\"appR\">\r\n    <el-row\r\n      type=\"flex\"\r\n      justify=\"center\"\r\n    >\r\n      <!-- justify 对齐方式 -->\r\n      <el-col\r\n        :span=\"12\"\r\n        style=\"height:100px\"\r\n      >\r\n      </el-col>\r\n    </el-row>\r\n    <el-row\r\n      type=\"flex\"\r\n      justify=\"center\"\r\n    >\r\n      <!-- justify 对齐方式 -->\r\n      <el-col :span=\"12\">\r\n        <el-container>\r\n          <el-main style=\"display:flex;justify-content:center;\">\r\n            <el-card\r\n              class=\"el-card\"\r\n              shadow=\"always\"\r\n            >\r\n              <h1 style=\"text-align: center;\">注销账号</h1>\r\n              <el-divider></el-divider>\r\n              <v-form\r\n                ref=\"form\"\r\n                v-model=\"valid\"\r\n                lazy-validation\r\n              >\r\n                <v-text-field\r\n                  v-model=\"user.email\"\r\n                  :rules=\"emailRules\"\r\n                  label=\"邮箱\"\r\n                  required\r\n                ></v-text-field>\r\n\r\n                <v-text-field\r\n                  v-model=\"user.password\"\r\n                  :rules=\"passwordRules\"\r\n                  type=\"password\"\r\n                  label=\"密码\"\r\n                  required\r\n                ></v-text-field>\r\n                <v-text-field\r\n                  v-model=\"user.confirmedPassword\"\r\n                  type=\"password\"\r\n                  :error-messages=\"confirmedPasswordRules(user.confirmedPassword)\"\r\n                  label=\"确认密码\"\r\n                  required\r\n                ></v-text-field>\r\n                <v-row>\r\n                  <v-col>\r\n                    <v-text-field\r\n                      v-model=\"user.verificationCode\"\r\n                      type=\"text\"\r\n                      :error-messages=\"verificationRules(user.verificationCode)\"\r\n                      label=\"验证码\"\r\n                      required\r\n                    ></v-text-field>\r\n                  </v-col>\r\n                  <v-col>\r\n                    <v-btn\r\n                      class=\"ma-2\"\r\n                      outlined\r\n                      color=\"indigo\"\r\n                      @click=\"fun_verification\"\r\n                    >\r\n                      发送邮箱验证码\r\n                    </v-btn>\r\n                  </v-col>\r\n                </v-row>\r\n                <div style=\"height: 20px\"></div>\r\n                <el-button\r\n                  type=\"primary\"\r\n                  :disabled=\"!valid\"\r\n                  @click=\"validate\"\r\n                >注销</el-button>\r\n\r\n                <el-button\r\n                  type=\"info\"\r\n                  @click=\"reset\"\r\n                >重置</el-button>\r\n                <el-button\r\n                  type=\"info\"\r\n                  @click=\"fun1\"\r\n                >退出</el-button>\r\n\r\n              </v-form>\r\n            </el-card>\r\n          </el-main>\r\n        </el-container>\r\n      </el-col>\r\n    </el-row>\r\n    <el-row\r\n      type=\"flex\"\r\n      justify=\"center\"\r\n    >\r\n      <!-- justify 对齐方式 -->\r\n      <el-col\r\n        :span=\"6\"\r\n        style=\"height:100px\"\r\n      >\r\n      </el-col>\r\n    </el-row>\r\n    <el-row\r\n      type=\"flex\"\r\n      justify=\"center\"\r\n    >\r\n      <!-- justify 对齐方式 -->\r\n      <el-col\r\n        :span=\"6\"\r\n        style=\"height:100px\"\r\n      >\r\n      </el-col>\r\n    </el-row>\r\n    <el-row\r\n      type=\"flex\"\r\n      justify=\"center\"\r\n    >\r\n      <!-- justify 对齐方式 -->\r\n      <el-col\r\n        :span=\"6\"\r\n        style=\"height:100px\"\r\n      >\r\n      </el-col>\r\n    </el-row>\r\n    <el-row\r\n      type=\"flex\"\r\n      justify=\"center\"\r\n    >\r\n      <!-- justify 对齐方式 -->\r\n      <el-col\r\n        :span=\"6\"\r\n        style=\"height:100px\"\r\n      >\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: 'DeleteAccount',\r\n    data: () => ({\r\n      user: {\r\n        email: '',\r\n        password: '',\r\n        confirmedPassword: '',\r\n        verificationCode: '',\r\n      },\r\n      valid: true,\r\n      email: '',\r\n      emailRules: [\r\n        v => !!v || '邮箱不能为空！',\r\n        v => /.+@.+\\..+/.test(v) || '邮箱格式非法！',\r\n      ],\r\n      password: '',\r\n      passwordRules: [\r\n        v => !!v || '密码不能为空！',\r\n      ],\r\n    }),\r\n    methods: {\r\n      validate () {\r\n        this.$refs.form.validate()\r\n        if (this.$refs.form.validate()) {\r\n          var _this = this\r\n          this.$http.post('/modify/deleteAccount.do', {\r\n            email: _this.user.email,\r\n            password: _this.user.confirmedPassword,\r\n            verificationCode: _this.user.verificationCode,\r\n          }).then(function (response) {\r\n            if (response.data.flag) {\r\n              _this.$message({\r\n                message: response.data.errorMsg,\r\n                type: 'success',\r\n              })\r\n              sessionStorage.removeItem('email')\r\n              _this.$router.push({ path: '/components/login' }).catch(err => { err = null })\r\n            } else {\r\n              _this.$message({\r\n                message: response.data.errorMsg,\r\n                type: 'warning',\r\n              })\r\n            }\r\n          }).catch(function (e) {\r\n            console.log(e)\r\n          })\r\n        }\r\n      },\r\n      reset () {\r\n        this.$refs.form.reset()\r\n      },\r\n      confirmedPasswordRules: function (v) {\r\n        if (v.length === 0 && this.user.password.length !== 0) {\r\n          return '密码不能为空！'\r\n        } else if (v !== this.user.password) {\r\n          return '两次的密码不一致！'\r\n        } else {\r\n          return ''\r\n        }\r\n      },\r\n      verificationRules: function (v) {\r\n        if (v.length === 0 && this.user.confirmedPassword.length !== 0) {\r\n          return '验证码不能为空！'\r\n        }\r\n      },\r\n      fun1: function () {\r\n        this.$router.push({ path: '/' }).catch(err => { err = null })\r\n      },\r\n      fun_verification: function () {\r\n        var _this = this\r\n        this.$http.post('/register/checkEmailExist.do', {\r\n          email: _this.user.email,\r\n          deleteAccount: true,\r\n        }).then(function (response) {\r\n          if (response.data.flag) {\r\n            _this.$message({\r\n              message: response.data.errorMsg,\r\n              type: 'success',\r\n            })\r\n          } else {\r\n            _this.$message({\r\n              message: response.data.errorMsg,\r\n              type: 'warning',\r\n            })\r\n          }\r\n        }).catch(function (e) {\r\n          console.log(e)\r\n        })\r\n      },\r\n    },\r\n    computed: {\r\n      // confirmedPasswordErrors () {\r\n      //   const errors = []\r\n      //   if (!this.$v.confirmedPassword.$dirty) return errors\r\n      //   !this.$v.confirmedPassword.required && errors.push('Name is required.')\r\n      //   return errors\r\n      // },\r\n    },\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  #submit{\r\n    color: #FFFFFF;\r\n    background: rgb(24,103,192);\r\n  }\r\n  #reset{\r\n    color: #FFFFFF;\r\n    background: rgb(251,140,0);\r\n  }\r\n  #appR{\r\n    background: url(../assets/bg.jpg) no-repeat;\r\n    background-size: cover;\r\n    height: 100%;\r\n  }\r\n  .el-card{\r\n    border-radius:30px;\r\n    width: 580px;\r\n    display:flex;\r\n    justify-content:center;\r\n  }\r\n  .el-row {\r\n    margin-bottom: 20px;\r\n  }\r\n  .v-form {\r\n    width: 380px;\r\n  }\r\n</style>\r\n"]}]}